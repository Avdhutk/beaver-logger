!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("$logger",[],n):"object"==typeof exports?exports.$logger=n():e.$logger=n()}(this,function(){return function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){"use strict";function r(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}Object.defineProperty(n,"__esModule",{value:!0});var o=t(1);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var i=r(o);n.default=i},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(2);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=t(7);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var i=t(9);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})});var a=t(5);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})});var c=t(6);Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return c[e]}})})},function(e,n,t){"use strict";function r(e,n,t){if(!y)return setTimeout(function(){return r(e,n,t)},1);if(window.console&&window.console.log){var o=window.LOG_LEVEL||m.config.logLevel;if(!(m.logLevels.indexOf(e)>m.logLevels.indexOf(o))){t=t||{};var i=[n];(0,h.isIE)()&&(t=JSON.stringify(t)),i.push(t),(t.error||t.warning)&&i.push("\n\n",t.error||t.warning);try{window.console[e]&&window.console[e].apply?window.console[e].apply(window.console,i):window.console.log&&window.console.log.apply&&window.console.log.apply(window.console,i)}catch(e){}}}}function o(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(m.config.uri){var t=w.length,r=g.length;if(t||r){for(var o={},i=v.metaBuilders,a=Array.isArray(i),c=0,i=a?i:i[Symbol.iterator]();;){var u;if(a){if(c>=i.length)break;u=i[c++]}else{if(c=i.next(),c.done)break;u=c.value}var f=u;try{(0,h.extend)(o,f(),!1)}catch(e){console.error("Error in custom meta builder:",e.stack||e.toString())}}for(var s={},l=v.headerBuilders,d=Array.isArray(l),p=0,l=d?l:l[Symbol.iterator]();;){var y;if(d){if(p>=l.length)break;y=l[p++]}else{if(p=l.next(),p.done)break;y=p.value}var b=y;try{(0,h.extend)(s,b(),!1)}catch(e){console.error("Error in custom header builder:",e.stack||e.toString())}}var _=w,j=(0,h.ajax)("post",m.config.uri,s,{events:_,meta:o,tracking:g},e);return n.buffer=w=[],n.tracking=g=[],j}}}function i(e,n,t){w.push({level:e,event:n,payload:t}),m.config.autoLog.indexOf(e)>-1&&b()}function a(e,n,t){m.config.prefix&&(n=m.config.prefix+"_"+n),t=t||{},"string"==typeof t?t={message:t}:t instanceof Error&&(t={error:t.stack||t.toString()}),t.timestamp=Date.now();for(var o=v.payloadBuilders,a=Array.isArray(o),c=0,o=a?o:o[Symbol.iterator]();;){var u;if(a){if(c>=o.length)break;u=o[c++]}else{if(c=o.next(),c.done)break;u=c.value}var f=u;try{(0,h.extend)(t,f(),!1)}catch(e){console.error("Error in custom payload builder:",e.stack||e.toString())}}m.config.silent||r(e,n,t),w.length===m.config.sizeLimit?i("info","logger_max_buffer_length"):w.length<m.config.sizeLimit&&i(e,n,t)}function c(e){return{debug:function(n,t){return a("debug",e+"_"+n,t)},info:function(n,t){return a("info",e+"_"+n,t)},warn:function(n,t){return a("warn",e+"_"+n,t)},error:function(n,t){return a("error",e+"_"+n,t)},flush:function(){return b()}}}function u(e,n){return a("debug",e,n)}function f(e,n){return a("info",e,n)}function s(e,n){return a("warn",e,n)}function l(e,n){return a("error",e,n)}function d(e){if(e){for(var n=v.trackingBuilders,t=Array.isArray(n),o=0,n=t?n:n[Symbol.iterator]();;){var i;if(t){if(o>=n.length)break;i=n[o++]}else{if(o=n.next(),o.done)break;i=o.value}var a=i;try{(0,h.extend)(e,a(),!1)}catch(e){console.error("Error in custom tracking builder:",e.stack||e.toString())}}r("debug","tracking",e),g.push(e)}}Object.defineProperty(n,"__esModule",{value:!0}),n.flush=n.tracking=n.buffer=void 0;var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.print=r,n.immediateFlush=o,n.log=a,n.prefix=c,n.debug=u,n.info=f,n.warn=s,n.error=l,n.track=d;var h=t(3),v=t(5),m=t(6),w=n.buffer=[],g=n.tracking=[];Function.prototype.bind&&window.console&&"object"===p(console.log)&&["log","info","warn","error"].forEach(function(e){console[e]=this.bind(console[e],console)},Function.prototype.call);var y=!1;setTimeout(function(){y=!0},1);var b=(0,h.promiseDebounce)(o,m.config.debounceInterval);n.flush=b},function(e,n,t){"use strict";function r(e,n){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e=e||{},n=n||{};for(var r in n)n.hasOwnProperty(r)&&(!t&&e.hasOwnProperty(r)||(e[r]=n[r]));return e}function o(e){return window.location.protocol===e.split("/")[0]}function i(e){var n=e.match(/https?:\/\/[^\/]+/);return!n||n[0]===window.location.protocol+"//"+window.location.host}function a(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return new l.SyncPromise(function(c){var u=window.XMLHttpRequest||window.ActiveXObject;if(window.XDomainRequest&&!i(n)){if(!o(n))return c();u=window.XDomainRequest}var f=new u("MSXML2.XMLHTTP.3.0");f.open(e.toUpperCase(),n,a),f.setRequestHeader("X-Requested-With","XMLHttpRequest"),f.setRequestHeader("Content-type","application/json");for(var s in t)t.hasOwnProperty(s)&&f.setRequestHeader(s,t[s]);f.onreadystatechange=function(){f.readyState>3&&c()},f.send(JSON.stringify(r).replace(/&/g,"%26"))})}function c(e,n){var t={};return function(){var r=arguments;return t.timeout&&(clearTimeout(t.timeout),delete t.timeout),t.timeout=setTimeout(function(){var n=t.resolver,o=t.rejector;return delete t.promise,delete t.resolver,delete t.rejector,delete t.timeout,l.SyncPromise.resolve().then(function(){return e.apply(null,r)}).then(n,o)},n),t.promise=t.promise||new l.SyncPromise(function(e,n){t.resolver=e,t.rejector=n}),t.promise}}function u(e,n){function t(){r=setTimeout(function(){e(),t()},n)}var r=void 0;return t(),{cancel:function(){clearTimeout(r)}}}function f(){var e="0123456789abcdef";return"xxxxxxxxxx".replace(/./g,function(){return e.charAt(Math.floor(Math.random()*e.length))})}function s(){return Boolean(window.document.documentMode)}Object.defineProperty(n,"__esModule",{value:!0}),n.windowReady=void 0,n.extend=r,n.isSameProtocol=o,n.isSameDomain=i,n.ajax=a,n.promiseDebounce=c,n.safeInterval=u,n.uniqueID=f,n.isIE=s;var l=t(4);n.windowReady=new l.SyncPromise(function(e){"complete"===document.readyState&&e(),window.addEventListener("load",e)})},function(e,n){"use strict";function t(e,n,t){function r(){if(o){if(a)return t(c);if(i)return n(u)}}var o=!1,i=!1,a=!1,c=void 0,u=void 0;try{e(function(e){u=e,i=!0,r()},function(e){c=e,a=!0,r()})}catch(e){return t(e)}o=!0,r()}function r(e){f.push(e),s=s||setTimeout(o,1)}function o(){s=null;var e=f;f=[];for(var n=function(n){var t=e[n];return t.silentReject?"continue":(t.handlers.push({onError:function(e){t.silentReject||i(e)}}),void t.dispatch())},t=0;t<e.length;t++){n(t)}}function i(e){if(l.indexOf(e)===-1){l.push(e),setTimeout(function(){throw e},1);for(var n=0;n<u.length;n++)u[n](e)}}function a(e){try{if(!e)return!1;if(window.Window&&e instanceof window.Window)return!1;if(window.constructor&&e instanceof window.constructor)return!1;if(d){var n=d.call(e);if("[object Window]"===n||"[object global]"===n||"[object DOMWindow]"===n)return!1}if(e&&e.then instanceof Function)return!0}catch(e){return!1}return!1}function c(){window.Promise=p}Object.defineProperty(n,"__esModule",{value:!0}),n.patchPromise=c;var u=[],f=[],s=void 0,l=[],d={}.toString,p=n.SyncPromise=function(e){if(this.resolved=!1,this.rejected=!1,this.silentReject=!1,this.handlers=[],r(this),e){var n=this;t(e,function(e){return n.resolve(e)},function(e){return n.reject(e)})}};p.resolve=function(e){return a(e)?e:(new p).resolve(e)},p.reject=function(e){return(new p).reject(e)},p.prototype.resolve=function(e){if(this.resolved||this.rejected)return this;if(a(e))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=e,this.dispatch(),this},p.prototype.reject=function(e){if(this.resolved||this.rejected)return this;if(a(e))throw new Error("Can not reject promise with another promise");return this.rejected=!0,this.value=e,this.dispatch(),this},p.prototype.asyncReject=function(e){this.silentReject=!0,this.reject(e)},p.prototype.dispatch=function(){var e=this;if(this.resolved||this.rejected)for(var n=function(){var n=e.handlers.shift(),t=void 0,r=void 0;try{e.resolved?t=n.onSuccess?n.onSuccess(e.value):e.value:e.rejected&&(n.onError?t=n.onError(e.value):r=e.value)}catch(e){r=e}if(t===e)throw new Error("Can not return a promise from the the then handler of the same promise");return n.promise?void(r?n.promise.reject(r):a(t)?t.then(function(e){n.promise.resolve(e)},function(e){n.promise.reject(e)}):n.promise.resolve(t)):"continue"};this.handlers.length;){n()}},p.prototype.then=function(e,n){if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.then expected a function for success handler");if(n&&"function"!=typeof n&&!n.call)throw new Error("Promise.then expected a function for error handler");var t=new p(null,this);return this.handlers.push({promise:t,onSuccess:e,onError:n}),this.silentReject=!0,this.dispatch(),t},p.prototype.catch=function(e){return this.then(null,e)},p.prototype.finally=function(e){return this.then(function(n){return p.try(e).then(function(){return n})},function(n){return p.try(e).then(function(){throw n})})},p.all=function(e){for(var n=new p,t=e.length,r=[],o=function(o){var i=a(e[o])?e[o]:p.resolve(e[o]);i.then(function(e){r[o]=e,t-=1,0===t&&n.resolve(r)},function(e){n.reject(e)})},i=0;i<e.length;i++)o(i);return t||n.resolve(r),n},p.onPossiblyUnhandledException=function(e){u.push(e)},p.try=function(e){return p.resolve().then(e)},p.delay=function(e){return new p(function(n){setTimeout(n,e)})},p.hash=function(e){var n={},t=[],r=function(r){e.hasOwnProperty(r)&&t.push(p.resolve(e[r]).then(function(e){n[r]=e}))};for(var o in e)r(o);return p.all(t).then(function(){return n})},p.promisifyCall=function(){var e=Array.prototype.slice.call(arguments),n=e.shift();if("function"!=typeof n)throw new Error("Expected promisifyCall to be called with a function");return new p(function(t,r){return e.push(function(e,n){return e?r(e):t(n)}),n.apply(null,e)})}},function(e,n){"use strict";function t(e){a.push(e)}function r(e){c.push(e)}function o(e){u.push(e)}function i(e){f.push(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.addPayloadBuilder=t,n.addMetaBuilder=r,n.addTrackingBuilder=o,n.addHeaderBuilder=i;var a=n.payloadBuilders=[],c=n.metaBuilders=[],u=n.trackingBuilders=[],f=n.headerBuilders=[]},function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.config={uri:"",prefix:"",initial_state_name:"init",flushInterval:6e5,debounceInterval:10,sizeLimit:300,silent:!1,heartbeat:!0,heartbeatConsoleLog:!0,heartbeatInterval:5e3,heartbeatTooBusy:!1,heartbeatTooBusyThreshold:1e4,logLevel:"debug",autoLog:["warn","error"],logUnload:!0,logUnloadSync:!1,logPerformance:!0},n.logLevels=["error","warn","info","debug"]},function(e,n,t){"use strict";function r(e){if((0,i.extend)(o.config,e||{}),!u){if(u=!0,o.config.logPerformance&&(0,a.initPerformance)(),o.config.heartbeat&&(0,a.initHeartBeat)(),o.config.logUnload){var n=!o.config.logUnloadSync;window.addEventListener("beforeunload",function(){(0,c.info)("window_beforeunload"),(0,c.immediateFlush)(n)}),window.addEventListener("unload",function(){(0,c.info)("window_unload"),(0,c.immediateFlush)(n)})}o.config.flushInterval&&setInterval(c.flush,o.config.flushInterval),window.beaverLogQueue&&(window.beaverLogQueue.forEach(function(e){(0,c.log)(e.level,e.event,e)}),delete window.beaverLogQueue)}}Object.defineProperty(n,"__esModule",{value:!0}),n.init=r;var o=t(6),i=t(3),a=t(8),c=t(2),u=!1},function(e,n,t){"use strict";function r(){return d?performance.now():Date.now()}function o(e){return e=void 0!==e?e:r(),{startTime:e,elapsed:function(){return parseInt(r()-e,10)},reset:function(){e=r()}}}function i(){if(d){var e=window.performance.timing;return parseInt(e.connectEnd-e.navigationStart,10)}}function a(){var e=o(),n=0;(0,l.safeInterval)(function(){if(!(u.config.heartbeatMaxThreshold&&n>u.config.heartbeatMaxThreshold)){n+=1;var t=e.elapsed(),r=t-u.config.heartbeatInterval,o={count:n,elapsed:t};u.config.heartbeatTooBusy&&(o.lag=r,r>=u.config.heartbeatTooBusyThreshold&&(0,f.info)("toobusy",o,{noConsole:!u.config.heartbeatConsoleLog})),(0,f.info)("heartbeat",o,{noConsole:!u.config.heartbeatConsoleLog})}},u.config.heartbeatInterval)}function c(){return d?((0,s.addPayloadBuilder)(function(){var e={};return e.client_elapsed=p.elapsed(),d&&(e.req_elapsed=h.elapsed()),e}),void l.windowReady.then(function(){var e=["connectEnd","connectStart","domComplete","domContentLoadedEventEnd","domContentLoadedEventStart","domInteractive","domLoading","domainLookupEnd","domainLookupStart","fetchStart","loadEventEnd","loadEventStart","navigationStart","redirectEnd","redirectStart","requestStart","responseEnd","responseStart","secureConnectionStart","unloadEventEnd","unloadEventStart"],n={};e.forEach(function(e){n[e]=parseInt(window.performance.timing[e],10)||0});var t=n.connectEnd-n.navigationStart;n.connectEnd&&Object.keys(n).forEach(function(e){var r=n[e];r&&(0,f.info)("timing_"+e,{client_elapsed:parseInt(r-n.connectEnd-(p.startTime-t),10),req_elapsed:parseInt(r-n.connectEnd,10)})}),(0,f.info)("timing",n),(0,f.info)("memory",window.performance.memory),(0,f.info)("navigation",window.performance.navigation),window.performance.getEntries&&window.performance.getEntries().forEach(function(e){["link","script","img","css"].indexOf(e.initiatorType)>-1&&(0,f.info)(e.initiatorType,e)})})):(0,f.info)("no_performance_data")}Object.defineProperty(n,"__esModule",{value:!0}),n.reqTimer=n.clientTimer=void 0,n.now=r,n.reqStartElapsed=i,n.initHeartBeat=a,n.initPerformance=c;var u=t(6),f=t(2),s=t(5),l=t(3),d=window&&window.performance&&performance.now&&performance.timing&&performance.timing.connectEnd&&performance.timing.navigationStart&&Math.abs(performance.now()-Date.now())>1e3&&performance.now()-(performance.timing.connectEnd-performance.timing.navigationStart)>0,p=n.clientTimer=o(),h=n.reqTimer=o(i())},function(e,n,t){"use strict";function r(){h=(0,a.now)()}function o(e){h=h||(0,a.reqStartElapsed)();var n=(0,a.now)(),t=void 0;void 0!==h&&(t=parseInt(n-h,0));var r="transition_"+p+"_to_"+e;(0,c.info)(r,{duration:t}),(0,c.track)({transition:r,transition_time:t}),(0,c.immediateFlush)(),h=n,p=e,d=(0,f.uniqueID)()}function i(e){r(),o(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.startTransition=r,n.endTransition=o,n.transition=i;var a=t(8),c=t(2),u=t(5),f=t(3),s=t(6),l=(0,f.uniqueID)(),d=(0,f.uniqueID)(),p=s.config.initial_state_name,h=void 0;(0,u.addPayloadBuilder)(function(){return{windowID:l,pageID:d}}),(0,u.addMetaBuilder)(function(){return{state:"ui_"+p}})}])});